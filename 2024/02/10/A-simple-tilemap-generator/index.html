<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mynamepfd.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"remove","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Tilemap generator   I made a simple tilemap generator based on the Map Generator made by TukanHan and the article. Thanks to them!">
<meta property="og:type" content="article">
<meta property="og:title" content="A simple tilemap generator">
<meta property="og:url" content="https://mynamepfd.github.io/2024/02/10/A-simple-tilemap-generator/index.html">
<meta property="og:site_name" content="Daniel Du&#39;s diary">
<meta property="og:description" content="Tilemap generator   I made a simple tilemap generator based on the Map Generator made by TukanHan and the article. Thanks to them!">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mynamepfd.github.io/photos/MapGenerator.png">
<meta property="og:image" content="https://mynamepfd.github.io/photos/RuleTileMaker.png">
<meta property="article:published_time" content="2024-02-10T04:45:31.000Z">
<meta property="article:modified_time" content="2024-02-10T07:00:15.211Z">
<meta property="article:author" content="Daniel Du">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mynamepfd.github.io/photos/MapGenerator.png">

<link rel="canonical" href="https://mynamepfd.github.io/2024/02/10/A-simple-tilemap-generator/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>A simple tilemap generator | Daniel Du's diary</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Daniel Du's diary</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/mynamepfd" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mynamepfd.github.io/2024/02/10/A-simple-tilemap-generator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Daniel Du">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Daniel Du's diary">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          A simple tilemap generator
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2024-02-10 12:45:31 / Modified: 15:00:15" itemprop="dateCreated datePublished" datetime="2024-02-10T12:45:31+08:00">2024-02-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <center>Tilemap generator</center>

<p><img src="/photos/MapGenerator.png" alt="tilemap generator"></p>
<p>I made a simple tilemap generator based on the <a target="_blank" rel="noopener" href="https://github.com/TukanHan/Map-Generator">Map Generator</a> made by TukanHan and the <a target="_blank" rel="noopener" href="https://www.redblobgames.com/maps/terrain-from-noise">article</a>.</p>
<p>Thanks to them!<span id="more"></span></p>
<h1 id="Perlin-Noise"><a href="#Perlin-Noise" class="headerlink" title="Perlin Noise"></a>Perlin Noise</h1><p>So if you want to make a tilemap generator, I strongly recommend you to review TukanHan’s project and read the the article mentioned above. I’m going to write about some of confusions I had while creating the tilemap generator. I hope it will be helpful for you.</p>
<p>The first problem is what is Perlin Noise? TukanHan gave a class ImprovedNoise. That’s exactly the implementation of Perlin Noise in C#. But Unity has provided a function to generate perlin noise map, and that is Mathf.PerlinNoise2D. So the class ImprovedNoise is equal to Mathf.PerlinNoise. And thus, a generated perlin noise map is just an static 2d array, not dynamic.</p>
<p>If you want to observe a noise map, I recommend you to watch <a target="_blank" rel="noopener" href="https://github.com/SebLague/Procedural-Landmass-Generation">the first four videos</a> made by Sebastian Lague. Yes, I’ve watched these videos in order to figure out what the perlin noise is, and finally I realised that a noise map is just a static 2d array, and perlin noise is just a kind of method to generate a noise map. So that step is not necessary to you.</p>
<p>But if you did, you’ll see that a basic noise map is too smooth. So we need to add more randomness to the noise map. Yes, all we have to do is to add a number of octaves to an empty 2d array, and an octave is actually a noise map. For example, the following code is used to generate an NxN map</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Noise</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">float</span>[,] PopulateOctave(<span class="built_in">int</span> N, <span class="built_in">float</span> freq, <span class="built_in">float</span> gain) &#123;</span><br><span class="line">		<span class="built_in">float</span>[,] octave = <span class="keyword">new</span> <span class="built_in">float</span>[N,N];</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>; i&lt;N; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="built_in">int</span> j=<span class="number">0</span>; j&lt;N; j++)</span><br><span class="line">				octave[i][j] = Mathf.PerlinNoise(i * freq, j * freq) * gain;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">float</span>[,] Generate(<span class="built_in">int</span> N) &#123;</span><br><span class="line">		octave1 = PopulateOctave(N, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">		octave2 = PopulateOctave(N, <span class="number">2</span>, <span class="number">1</span>/<span class="number">2</span>);</span><br><span class="line">		octave3 = PopulateOctave(N, <span class="number">4</span>, <span class="number">1</span>/<span class="number">4</span>);</span><br><span class="line">		<span class="built_in">float</span>[,] noiseMap = <span class="keyword">new</span> <span class="built_in">float</span>[N,N];</span><br><span class="line">		<span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>; i&lt;N; i++)</span><br><span class="line">			<span class="keyword">for</span>(<span class="built_in">int</span> j=<span class="number">0</span>; j&lt;N; j++)</span><br><span class="line">				noiseMap[i][j] = octave1[i][j]+octave2[i][j]+octave3[i][j];</span><br><span class="line">		<span class="keyword">return</span> noiseMap;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Yeah, you may realise that I generated three octaves, but in the article, the author calculated all octaves in one loop. Generating an octave in a function can add more flexibility to the octave, for example, I can set different offset to different octaves or rotate some of them to make the noise map looks less like procedural generated, as stated in the article. So if you want more flexibility, I suggest you do that.</p>
<h1 id="Some-issues-in-TukanHan’s-Map-Generator"><a href="#Some-issues-in-TukanHan’s-Map-Generator" class="headerlink" title="Some issues in TukanHan’s Map Generator"></a>Some issues in TukanHan’s Map Generator</h1><p>TukanHan provides several parameters to control map generation. But I have to say that he made some mistakes.</p>
<p>The first one is the targetValue in Noise Map Parameters. TukanHan wants to use this parameter to tweak the overall value in the final noise map, like, <code>v = Mathf.Pow(v, targetValue)</code>. You may realise that it will not produce the expected result, i.e.,  If you set the targetValue to 0.3, you won’t get a noise map with most values around 0.3. I recommend you to tweak the overall value by an AnimationCurve. Yes, I learned this trick from Sebastian Lague’s videos I mentioned above.</p>
<p>The next issue is the order. TukanHan provides another parameter - the Value Range - for mapping values in the noise map to a range, and that’s the final step, which means that we will finally get a noise map with values between the Min Value and the Max Value. I think that the tweak by the targetValue should happen after the mapping, and the reason is that I found that the values in the noise map may be in a small range, for example, we might get a noise map with values between 0.653 and 0.765. If we tweak the values first and then mapping, the results may not be what we expected.</p>
<h1 id="Rule-Tile-Maker"><a href="#Rule-Tile-Maker" class="headerlink" title="Rule Tile Maker"></a>Rule Tile Maker</h1><p><img src="/photos/RuleTileMaker.png" alt="rule tile maker"></p>
<p>The last question is how to make tiles? The Rule tile is a powerful tool for drawing terrain in Unity, but we may use dozens of rule tiles and creating them one by one is just too much work! So I also made a tool based on the <a target="_blank" rel="noopener" href="https://github.com/stalengd/QuickRuleTileEditor">QuickRuleTileEditor</a> to build rule tiles quickly, but I use the UI Toolkit to create the UI interface instead of drawing them via code, which makes everything much easier! Therefore, I strongly recommend you to create the tool’s UI interface directly using the UI Toolkit.</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/01/23/Some-thoughts-on-programming-languages/" rel="prev" title="Some thoughts on programming languages">
      <i class="fa fa-chevron-left"></i> Some thoughts on programming languages
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/02/11/Some-improvements-to-the-tilemap-generator/" rel="next" title="Some improvements to the tilemap generator">
      Some improvements to the tilemap generator <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Daniel Du</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
